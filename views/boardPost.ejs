<div class="container">

    <form>
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" class="form-control" placeholder="title" id="postTitle">
        </div>

        <div class="form-group">
            <label for="title">category:</label>
            <select class="form-select" aria-label="Default select example" id="postCategory">
                <option value="기타">기타</option>
                <option value="병원">병원</option>
                <option value="자랑">자랑</option>
            </select>
        </div>

        <div class="form-group">
            <label for="content">Content:</label>
            <textarea class="form-control" rows="5" id="postContent"></textarea>
        </div>
        
        <button onclick="postSave()" id="btn-save" class="btn btn-primary" type="button">작성완료</button>
    </form>
    <button class="btn btn-secondary" onclick="history.back()">글목록</button>
</div>

<script>
	function postSave() {
		const postTitle = $('#postTitle').val();
		const postCategory = $('#postCategory').val();
        const postContent = $('#postContent').val();

		if (!postTitle) {
			alert('제목을 입력해주세요.');
			return;
		} else if (!postContent) {
			alert('내용을 입력해주세요.');
			return;
		} else {
			$.ajax({
				type: 'POST',
				url: '/posts',
				data: {
					title: postTitle,
					category: postCategory,
          content: postContent,
				},
				success: function (response) {
					alert('게시글이 작성되었습니다.');
					window.location.href = '/boardList?page=1';
				},
				error: function (response) {
					console.log(response.responseJSON.message);
				},
			});
		}
	}
</script>